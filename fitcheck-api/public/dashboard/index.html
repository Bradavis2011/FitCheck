<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Or This? — Agent Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Playfair+Display:ital,wght@0,400;1,400&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            coral: { DEFAULT: '#E85D4C', light: '#FF7A6B', dark: '#C94A3A' },
            cream: { DEFAULT: '#FBF7F4', dark: '#F5EDE7' },
          },
          fontFamily: {
            sans: ['DM Sans', 'ui-sans-serif', 'system-ui'],
          },
          borderRadius: { '2xl': '16px', '3xl': '24px' },
        }
      }
    }
  </script>
  <link rel="stylesheet" href="/dashboard/styles.css?v=3">
</head>
<body class="bg-cream font-sans antialiased">

  <!-- ─── Login Page ──────────────────────────────────────────────────── -->
  <div id="page-login" class="login-split">

    <!-- Editorial illustration panel (desktop only) -->
    <div class="login-editorial-panel">
      <div class="login-editorial-brand">
        <div class="logo-icon">?</div>
        <span class="login-editorial-brand-name">Or This?</span>
      </div>
      <div class="login-figure-wrap">
        <img src="/dashboard/images/editorial-orange.jpg" alt="" class="login-editorial-img">
        <div class="login-editorial-img-overlay"></div>
      </div>
      <div class="login-editorial-footer">
        <p class="login-editorial-quote">Style is a way to say who you are without having to speak.</p>
        <p class="login-editorial-sub">Confidence in every choice.</p>
      </div>
    </div>

    <!-- Form panel -->
    <div class="login-form-panel">
      <div class="login-form-inner">

        <!-- Mobile: logo + title -->
        <div class="login-mobile-header">
          <div class="logo-icon" style="margin:0 auto 16px;">?</div>
          <h1 class="editorial-heading" style="font-size:1.75rem;text-align:center;">Agent Dashboard</h1>
          <p style="color:var(--muted);font-size:0.875rem;text-align:center;margin-top:4px;">Or This? Operator Console</p>
        </div>

        <!-- Desktop: just heading (logo is in editorial panel) -->
        <div class="login-desktop-header">
          <h2 class="login-form-heading">Agent Dashboard</h2>
          <p class="login-form-sub">Or This? Operator Console</p>
        </div>

        <form id="login-form" autocomplete="off">
          <label class="block text-sm font-medium text-gray-700 mb-2">Access Token</label>
          <input
            id="token-input"
            type="password"
            placeholder="Paste your ADMIN_DASHBOARD_TOKEN"
            class="w-full px-4 py-3 border border-gray-200 focus:outline-none focus:ring-2 focus:border-transparent text-gray-900 text-sm"
            style="--tw-ring-color: #E85D4C;"
          >
          <p id="login-error" class="hidden text-red-500 text-sm mt-2 pl-1"></p>
          <button
            type="submit"
            class="btn-coral w-full mt-4 py-3 text-sm font-semibold"
          >Sign in to Dashboard</button>
        </form>
        <p class="text-center text-xs text-gray-400 mt-6">
          Set <code class="bg-white px-1 py-0.5 rounded text-gray-600">ADMIN_DASHBOARD_TOKEN</code> in your server .env
        </p>

      </div>
    </div>

  </div>

  <!-- ─── App Shell (no sidebar) ─────────────────────────────────────── -->
  <div id="app-shell" class="hidden">

    <!-- Floating logo mark — top-left, navigates to overview -->
    <a href="#overview" id="logo-home" class="logo-mark-fixed">?</a>

    <!-- Dot page indicators — right edge -->
    <nav id="dot-nav" class="dot-nav">
      <button class="dot" data-dot="overview">
        <span class="dot-tooltip">Overview</span>
      </button>
      <button class="dot" data-dot="social">
        <span class="dot-tooltip">Social Posts</span>
      </button>
      <button class="dot" data-dot="queue">
        <span class="dot-tooltip">Approval Queue</span>
      </button>
      <button class="dot" data-dot="log">
        <span class="dot-tooltip">Action Log</span>
      </button>
    </nav>

    <!-- Scrollable page container -->
    <div id="page-container" class="page-container">

      <!-- ── Overview ─────────────────────────────────────────────── -->
      <section data-page="overview" class="magazine-page hidden">
        <!-- Populated by loadOverview() -->
      </section>

      <!-- ── Social Posts ──────────────────────────────────────────── -->
      <section data-page="social" class="magazine-page hidden">
        <!-- Editorial split header -->
        <div class="split-hero">
          <div class="split-hero-img">
            <img src="/dashboard/images/editorial-teal.jpg" alt="">
          </div>
          <div class="split-hero-content">
            <span class="editorial-rule" style="margin:0 0 24px 0;display:block;"></span>
            <p class="section-label" style="margin-bottom:12px;">Content Engine</p>
            <h1 style="font-family:'Playfair Display',Georgia,serif;font-style:italic;font-weight:400;font-size:3rem;color:var(--black);letter-spacing:-0.02em;line-height:1.15;margin-bottom:16px;">The Content Studio</h1>
            <p style="color:var(--muted);font-size:0.9375rem;margin-bottom:28px;max-width:360px;line-height:1.6;">Review, approve, and publish content to social channels</p>
            <div style="display:flex;align-items:center;gap:16px;flex-wrap:wrap;">
              <button onclick="handleForceTrigger(this)" class="btn-coral" style="padding:14px 28px;">▶ Generate Posts Now</button>
              <p class="section-label">Mon · Wed · Fri at 8:30am UTC</p>
            </div>
          </div>
        </div>

        <!-- Pending + history content -->
        <div class="page-content">
          <p class="section-label" style="margin-bottom:20px;">Pending Review</p>
          <div id="social-queue-content"></div>

          <p class="section-label" style="margin-top:48px;margin-bottom:20px;">Recent Posts</p>
          <div id="social-history-content"></div>
        </div>
      </section>

      <!-- ── Approval Queue ─────────────────────────────────────────── -->
      <section data-page="queue" class="magazine-page hidden">
        <div class="typo-hero">
          <span class="editorial-rule" style="margin:0 0 24px 0;display:block;"></span>
          <p class="section-label" style="margin-bottom:12px;">High-risk actions</p>
          <h1 class="typo-hero-title">The Editor's Desk</h1>
          <div style="margin-bottom:16px;">
            <div id="queue-hero-count" class="typo-hero-count">—</div>
            <p class="section-label">Awaiting Decision</p>
          </div>
          <p style="color:var(--muted);font-size:0.9375rem;max-width:480px;line-height:1.6;">Review and approve high-risk agent actions before they execute.</p>
        </div>
        <div class="page-content">
          <div id="queue-content"></div>
          <div id="queue-pagination" style="margin-top:24px;"></div>
        </div>
      </section>

      <!-- ── Agent Detail ────────────────────────────────────────────── -->
      <section data-page="agent" class="magazine-page hidden">
        <div id="agent-detail-content"></div>
      </section>

      <!-- ── Action Log ──────────────────────────────────────────────── -->
      <section data-page="log" class="magazine-page hidden">
        <div class="typo-hero">
          <span class="editorial-rule" style="margin:0 0 24px 0;display:block;"></span>
          <p class="section-label" style="margin-bottom:12px;">Full audit trail</p>
          <h1 class="typo-hero-title">The Archive</h1>
          <p style="color:var(--muted);font-size:0.9375rem;max-width:480px;line-height:1.6;">Full audit trail of all agent actions and decisions.</p>
        </div>
        <div class="page-content">
          <!-- Filter bar -->
          <div style="display:flex;gap:12px;flex-wrap:wrap;margin-bottom:32px;">
            <select id="log-filter-agent" style="padding:10px 16px;border:1px solid var(--border-solid);border-radius:0;font-family:'DM Sans',sans-serif;font-size:0.875rem;background:white;color:var(--charcoal);">
              <option value="">All Agents</option>
            </select>
            <select id="log-filter-status" style="padding:10px 16px;border:1px solid var(--border-solid);border-radius:0;font-family:'DM Sans',sans-serif;font-size:0.875rem;background:white;color:var(--charcoal);">
              <option value="">All Statuses</option>
              <option value="pending">Pending</option>
              <option value="approved">Approved</option>
              <option value="executed">Executed</option>
              <option value="failed">Failed</option>
              <option value="rejected">Rejected</option>
            </select>
            <select id="log-filter-risk" style="padding:10px 16px;border:1px solid var(--border-solid);border-radius:0;font-family:'DM Sans',sans-serif;font-size:0.875rem;background:white;color:var(--charcoal);">
              <option value="">All Risk Levels</option>
              <option value="low">Low</option>
              <option value="medium">Medium</option>
              <option value="high">High</option>
            </select>
            <button id="log-filter-btn" class="btn-coral" style="padding:10px 20px;">Filter</button>
          </div>
          <div id="log-content"></div>
          <div id="log-pagination" style="margin-top:24px;"></div>
        </div>
      </section>

    </div><!-- /page-container -->

    <!-- Footer actions (floating bottom-left) -->
    <div class="footer-actions">
      <button id="kill-all-btn" class="btn-danger" style="padding:8px 16px;">Kill All</button>
      <button id="logout-btn" class="btn-ghost" style="padding:8px 16px;">Sign Out</button>
    </div>

  </div><!-- /app-shell -->

  <!-- Toast -->
  <div id="toast" class="hidden">
    <div class="toast-inner toast-success"></div>
  </div>

  <script src="/dashboard/app.js?v=3"></script>
</body>
</html>
