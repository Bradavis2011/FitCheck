<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Or This? ‚Äî Agent Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Playfair+Display:ital,wght@0,400;1,400&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            coral: { DEFAULT: '#E85D4C', light: '#FF7A6B', dark: '#C94A3A' },
            cream: { DEFAULT: '#FBF7F4', dark: '#F5EDE7' },
          },
          fontFamily: {
            sans: ['DM Sans', 'ui-sans-serif', 'system-ui'],
          },
          borderRadius: { '2xl': '16px', '3xl': '24px' },
        }
      }
    }
  </script>
  <link rel="stylesheet" href="/dashboard/styles.css">
</head>
<body class="bg-cream font-sans antialiased">

  <!-- ‚îÄ‚îÄ‚îÄ Login Page ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <div id="page-login" class="login-split">

    <!-- Editorial illustration panel (desktop only) -->
    <div class="login-editorial-panel">
      <!-- Brand mark -->
      <div class="login-editorial-brand">
        <div class="logo-icon">?</div>
        <span class="login-editorial-brand-name">Or This?</span>
      </div>

      <!-- Fashion illustration -->
      <div class="login-figure-wrap">
        <svg viewBox="0 0 280 540" fill="none" xmlns="http://www.w3.org/2000/svg" class="login-fashion-svg">
          <!-- Watermark ? -->
          <text x="-22" y="430" font-family="Georgia,serif" font-style="italic" font-size="440" fill="rgba(255,255,255,0.038)">?</text>
          <!-- Editorial horizontal rules at waist level -->
          <line x1="16" y1="192" x2="58" y2="192" stroke="rgba(232,93,76,0.45)" stroke-width="0.75"/>
          <line x1="222" y1="192" x2="264" y2="192" stroke="rgba(232,93,76,0.45)" stroke-width="0.75"/>
          <!-- HEAD -->
          <ellipse cx="140" cy="62" rx="18" ry="22" fill="rgba(255,255,255,0.93)"/>
          <!-- Hair (abstract) -->
          <path d="M124 50 Q131 32 140 39 Q149 27 158 48" stroke="rgba(255,255,255,0.38)" stroke-width="1.5" stroke-linecap="round" fill="none"/>
          <!-- NECK -->
          <rect x="135" y="83" width="10" height="18" fill="rgba(255,255,255,0.90)"/>
          <!-- COAT body -->
          <path d="M135 99 L68 123 L60 263 L80 269 L108 269 L126 230 L132 216 L140 213 L148 216 L154 230 L172 269 L200 269 L220 263 L212 123 L145 99 Z" fill="rgba(255,255,255,0.88)"/>
          <!-- LAPELS in coral -->
          <path d="M135 99 L122 113 L137 124 L140 133 L143 124 L158 113 L145 99 Z" fill="#E85D4C"/>
          <!-- BELT in coral -->
          <rect x="96" y="218" width="88" height="4" fill="#E85D4C"/>
          <!-- Center button detail -->
          <circle cx="140" cy="160" r="1.6" fill="rgba(232,93,76,0.5)"/>
          <circle cx="140" cy="176" r="1.6" fill="rgba(232,93,76,0.5)"/>
          <circle cx="140" cy="193" r="1.6" fill="rgba(232,93,76,0.5)"/>
          <!-- LEFT ARM -->
          <path d="M71 127 L52 208 L61 213 L78 132 Z" fill="rgba(255,255,255,0.76)"/>
          <!-- RIGHT ARM -->
          <path d="M209 127 L226 203 L217 208 L202 132 Z" fill="rgba(255,255,255,0.70)"/>
          <!-- Clutch bag in coral -->
          <rect x="220" y="193" width="22" height="14" rx="1" fill="#E85D4C" opacity="0.82"/>
          <!-- BACK LEG -->
          <rect x="150" y="267" width="16" height="200" fill="rgba(255,255,255,0.66)"/>
          <!-- FRONT LEG -->
          <rect x="114" y="267" width="16" height="200" fill="rgba(255,255,255,0.87)"/>
          <!-- FRONT SHOE (toe box + heel post) -->
          <path d="M105 466 L130 466 L130 472 Q130 479 124 481 L108 481 Q100 478 100 471 Q100 466 105 466 Z" fill="rgba(255,255,255,0.87)"/>
          <rect x="127" y="481" width="3" height="13" fill="rgba(255,255,255,0.70)"/>
          <!-- BACK SHOE -->
          <path d="M150 466 L166 466 L166 472 Q166 479 162 481 L152 481 Q146 478 146 471 Q146 466 150 466 Z" fill="rgba(255,255,255,0.66)"/>
          <rect x="163" y="481" width="3" height="13" fill="rgba(255,255,255,0.52)"/>
          <!-- Dot column accents (editorial) -->
          <circle cx="32" cy="308" r="1.5" fill="rgba(232,93,76,0.32)"/>
          <circle cx="32" cy="321" r="1.5" fill="rgba(232,93,76,0.32)"/>
          <circle cx="32" cy="334" r="1.5" fill="rgba(232,93,76,0.32)"/>
          <circle cx="248" cy="308" r="1.5" fill="rgba(232,93,76,0.32)"/>
          <circle cx="248" cy="321" r="1.5" fill="rgba(232,93,76,0.32)"/>
          <circle cx="248" cy="334" r="1.5" fill="rgba(232,93,76,0.32)"/>
        </svg>
      </div>

      <!-- Quote -->
      <div class="login-editorial-footer">
        <p class="login-editorial-quote">Style is a way to say who you are without having to speak.</p>
        <p class="login-editorial-sub">Confidence in every choice.</p>
      </div>
    </div>

    <!-- Form panel -->
    <div class="login-form-panel">
      <div class="login-form-inner">

        <!-- Mobile: logo + title -->
        <div class="login-mobile-header">
          <div class="logo-icon" style="margin:0 auto 16px;">?</div>
          <h1 class="editorial-heading" style="font-size:1.75rem;text-align:center;">Agent Dashboard</h1>
          <p style="color:var(--muted);font-size:0.875rem;text-align:center;margin-top:4px;">Or This? Operator Console</p>
        </div>

        <!-- Desktop: just heading (logo is in editorial panel) -->
        <div class="login-desktop-header">
          <h2 class="login-form-heading">Agent Dashboard</h2>
          <p class="login-form-sub">Or This? Operator Console</p>
        </div>

        <form id="login-form" autocomplete="off">
          <label class="block text-sm font-medium text-gray-700 mb-2">Access Token</label>
          <input
            id="token-input"
            type="password"
            placeholder="Paste your ADMIN_DASHBOARD_TOKEN"
            class="w-full px-4 py-3 border border-gray-200 focus:outline-none focus:ring-2 focus:border-transparent text-gray-900 text-sm"
            style="--tw-ring-color: #E85D4C;"
          >
          <p id="login-error" class="hidden text-red-500 text-sm mt-2 pl-1"></p>
          <button
            type="submit"
            class="btn-coral w-full mt-4 py-3 text-sm font-semibold"
          >Sign in to Dashboard</button>
        </form>
        <p class="text-center text-xs text-gray-400 mt-6">
          Set <code class="bg-white px-1 py-0.5 rounded text-gray-600">ADMIN_DASHBOARD_TOKEN</code> in your server .env
        </p>

      </div>
    </div>

  </div>

  <!-- ‚îÄ‚îÄ‚îÄ App Shell ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <div id="app-shell" class="hidden h-screen flex overflow-hidden">

    <!-- Sidebar -->
    <aside id="sidebar" class="w-64 flex-shrink-0 bg-white border-r border-gray-100 flex flex-col shadow-sm z-10">
      <!-- Logo -->
      <div class="px-5 py-5 border-b border-gray-100">
        <div class="flex items-center gap-3">
          <div class="logo-icon">?</div>
          <div>
            <div class="font-semibold text-gray-900 text-sm leading-tight">Or This?</div>
            <div class="text-xs text-gray-400">Agent Console</div>
          </div>
        </div>
      </div>

      <!-- Nav -->
      <nav class="flex-1 p-3 overflow-y-auto space-y-0.5">
        <a href="#overview" data-nav="overview" class="nav-item">
          <span>üìä</span><span>Overview</span>
        </a>
        <a href="#social" data-nav="social" class="nav-item">
          <span>üì±</span><span>Social Posts</span>
          <span id="social-badge" class="ml-auto hidden text-xs font-semibold bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full"></span>
        </a>
        <a href="#queue" data-nav="queue" class="nav-item">
          <span>‚è≥</span><span>Approval Queue</span>
          <span id="queue-badge" class="ml-auto hidden text-xs font-semibold bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full"></span>
        </a>
        <a href="#log" data-nav="log" class="nav-item">
          <span>üìã</span><span>Action Log</span>
        </a>

        <div class="px-3 pt-5 pb-1">
          <p class="text-xs font-medium text-gray-400 uppercase tracking-wider">Agents</p>
        </div>
        <div id="agent-nav-links"></div>
      </nav>

      <!-- Bottom -->
      <div class="p-3 border-t border-gray-100 space-y-1">
        <!-- Editorial fashion accent -->
        <div class="sidebar-editorial-rule" aria-hidden="true"><span class="sidebar-editorial-mark"></span></div>
        <button id="kill-all-btn" class="btn-danger w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium">
          üõë Kill All Agents
        </button>
        <button id="logout-btn" class="btn-ghost w-full flex items-center justify-center gap-2 px-4 py-2 rounded-xl text-sm">
          ‚Ü© Sign Out
        </button>
      </div>
    </aside>

    <!-- Main Content -->
    <main id="main-content" class="flex-1 overflow-y-auto">
      <div class="max-w-6xl mx-auto p-8">

        <!-- ‚îÄ‚îÄ Overview ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <div data-page="overview" class="hidden">
          <div class="mb-8">
            <h1 class="editorial-heading" style="font-size:1.75rem;margin-bottom:6px;">Agent Dashboard</h1>
            <p style="color:var(--muted);font-size:0.875rem;">Autonomous agent workforce at a glance</p>
          </div>
          <div id="stat-cards" class="grid grid-cols-2 lg:grid-cols-4 gap-4" style="margin-bottom:40px;"></div>
          <div style="margin-bottom:40px;">
            <p class="section-label" style="margin-bottom:20px;">Operator Agents</p>
            <div id="agent-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
          </div>
          <div style="margin-bottom:40px;">
            <p class="section-label" style="margin-bottom:20px;">Reporting &amp; Intelligence</p>
            <div id="reporting-agents" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"></div>
          </div>
          <div>
            <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;">
              <p class="section-label">Pending Approval</p>
              <a href="#queue" style="font-size:0.75rem;font-weight:500;letter-spacing:0.1em;text-transform:uppercase;color:var(--coral);text-decoration:none;">View all</a>
            </div>
            <div id="pending-preview"></div>
          </div>
        </div>

        <!-- ‚îÄ‚îÄ Social Posts ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <div data-page="social" class="hidden">
          <div class="mb-8">
            <h1 class="editorial-heading" style="font-size:1.75rem;margin-bottom:4px;">Social Posts</h1>
            <p class="text-gray-400 text-sm">Review, approve, and publish content to social channels</p>
          </div>
          <div id="social-run-bar" class="card p-4 mb-6" style="display:flex;align-items:center;justify-content:space-between;gap:16px;">
            <div>
              <p style="font-weight:600;font-size:0.875rem;color:#1A1A1A;">Content Engine</p>
              <p class="section-label" style="margin-top:2px;">Mon ¬∑ Wed ¬∑ Fri at 8:30am UTC ‚Äî or run now</p>
            </div>
            <button onclick="handleForceTrigger(this)" class="btn-coral" style="padding:10px 20px;font-size:0.875rem;font-weight:600;white-space:nowrap;">
              ‚ñ∂ Generate Posts Now
            </button>
          </div>
          <div>
            <p class="section-label" style="margin-bottom:12px;">Pending Review</p>
            <div id="social-queue-content"></div>
          </div>
          <div style="margin-top:32px;">
            <p class="section-label" style="margin-bottom:12px;">Recent Posts</p>
            <div id="social-history-content"></div>
          </div>
        </div>

        <!-- ‚îÄ‚îÄ Approval Queue ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <div data-page="queue" class="hidden">
          <div class="mb-8">
            <h1 class="editorial-heading" style="font-size:1.75rem;margin-bottom:6px;">Approval Queue</h1>
            <p style="color:var(--muted);font-size:0.875rem;">Review and approve high-risk agent actions</p>
          </div>
          <div id="queue-content"></div>
          <div id="queue-pagination" class="mt-6"></div>
        </div>

        <!-- ‚îÄ‚îÄ Agent Detail ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <div data-page="agent" class="hidden">
          <div id="agent-detail-content"></div>
        </div>

        <!-- ‚îÄ‚îÄ Action Log ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <div data-page="log" class="hidden">
          <div class="mb-8">
            <h1 class="editorial-heading" style="font-size:1.75rem;margin-bottom:6px;">Action Log</h1>
            <p style="color:var(--muted);font-size:0.875rem;">Full audit trail of every agent action</p>
          </div>
          <div class="flex flex-wrap gap-3 mb-6">
            <select id="log-filter-agent" class="px-3 py-2 border border-gray-200 rounded-xl text-sm text-gray-700 bg-white focus:outline-none">
              <option value="">All Agents</option>
            </select>
            <select id="log-filter-status" class="px-3 py-2 border border-gray-200 rounded-xl text-sm text-gray-700 bg-white focus:outline-none">
              <option value="">All Statuses</option>
              <option value="pending">Pending</option>
              <option value="approved">Approved</option>
              <option value="executed">Executed</option>
              <option value="failed">Failed</option>
              <option value="rejected">Rejected</option>
            </select>
            <select id="log-filter-risk" class="px-3 py-2 border border-gray-200 rounded-xl text-sm text-gray-700 bg-white focus:outline-none">
              <option value="">All Risk Levels</option>
              <option value="low">Low</option>
              <option value="medium">Medium</option>
              <option value="high">High</option>
            </select>
            <button id="log-filter-btn" class="btn-coral px-4 py-2 rounded-xl text-sm font-medium">Apply Filter</button>
          </div>
          <div id="log-content"></div>
          <div id="log-pagination" class="mt-6"></div>
        </div>

      </div>
    </main>
  </div>

  <!-- Toast -->
  <div id="toast" class="hidden">
    <div class="toast-inner toast-success"></div>
  </div>

  <script src="/dashboard/app.js"></script>
</body>
</html>
