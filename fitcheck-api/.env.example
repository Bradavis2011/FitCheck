# ── Core Infrastructure ────────────────────────────────────────────────────────

# Database (Railway PostgreSQL - get URL from railway.app)
DATABASE_URL=postgresql://user:password@localhost:5432/fitcheck

# Clerk Authentication (get from clerk.com dashboard)
CLERK_SECRET_KEY=sk_test_...
CLERK_WEBHOOK_SECRET=whsec_...

# Google Gemini (FREE - get key at https://aistudio.google.com/apikey)
GEMINI_API_KEY=your-gemini-api-key-here

# AWS S3 (required for production - images stored here instead of database)
AWS_ACCESS_KEY_ID=AKIA...
AWS_SECRET_ACCESS_KEY=...
AWS_S3_BUCKET=fitcheck-images
AWS_REGION=us-east-1

# App
NODE_ENV=development
PORT=3000
CORS_ORIGIN=*

# ── Monitoring & Analytics ─────────────────────────────────────────────────────

# Sentry (server-side error tracking — get DSN from sentry.io)
SENTRY_DSN=https://...@sentry.io/...

# PostHog (product analytics — get from posthog.com)
POSTHOG_API_KEY=phc_...
POSTHOG_HOST=https://app.posthog.com

# ── Subscription ───────────────────────────────────────────────────────────────

# RevenueCat (generate any random secret; paste same value in RevenueCat webhook settings)
REVENUECAT_WEBHOOK_AUTH_TOKEN=your-random-secret-here

# ── Email ─────────────────────────────────────────────────────────────────────

# Resend (transactional email — get from resend.com)
RESEND_API_KEY=re_...
RESEND_WEBHOOK_SECRET=whsec_...    # Resend webhook signing secret

# Founders / ops
FOUNDER_EMAIL=founder@orthis.app
OPS_EMAIL=ops@orthis.app

# ── Admin & Security ───────────────────────────────────────────────────────────

# Admin user IDs (comma-separated Clerk user IDs for founder accounts)
ADMIN_USER_IDS=user_abc123,user_def456

# Admin dashboard bypass token (random string — used in the web dashboard)
ADMIN_DASHBOARD_TOKEN=your-random-admin-token-here

# HMAC secret for follow-up email click-through links (random 32+ char string)
FOLLOW_UP_HMAC_SECRET=your-random-hmac-secret-here

# Rate Limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=60

# ── Cron / Agent Feature Flags ────────────────────────────────────────────────

# Master cron toggle (set true in production to enable all scheduled agents)
ENABLE_CRON=false

# Per-agent toggles (all default to enabled when ENABLE_CRON=true)
ENABLE_NUDGE=true
ENABLE_BETA_RECRUITER=true
ENABLE_LEARNING_SYSTEM=true

# AI token budget (max tokens/day across all Gemini calls)
DAILY_TOKEN_BUDGET=500000

# ── Referral ───────────────────────────────────────────────────────────────────

# Base URL for referral invite links (shown to users)
REFERRAL_BASE_URL=https://orthis.app/invite

# ── Autonomous Operator Agents ─────────────────────────────────────────────────

# Twitter / X API v2 (OAuth 1.0a — required for posting tweets)
# Get from developer.twitter.com → Project → App → Keys and Tokens
TWITTER_API_KEY=
TWITTER_API_SECRET=
TWITTER_ACCESS_TOKEN=
TWITTER_ACCESS_TOKEN_SECRET=

# App Store Connect (required for fetching + replying to Apple App Store reviews)
# Get from appstoreconnect.apple.com → Users and Access → Keys
APPSTORE_KEY_ID=
APPSTORE_ISSUER_ID=
APPSTORE_PRIVATE_KEY=          # base64-encoded ES256 .p8 private key
APPSTORE_APP_ID=               # numeric App Store app ID

# Google Play (required for fetching Google Play reviews)
# Create a service account in Google Cloud Console, grant androidpublisher access
GOOGLE_PLAY_SERVICE_ACCOUNT=   # full JSON service account key as a single-line string
GOOGLE_PLAY_PACKAGE_NAME=      # e.g. com.orthis.app
